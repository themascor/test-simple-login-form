<div class="flex justify-center items-center min-h-dvh">
  <mat-card class="w-1/3 min-w-80" appearance="outlined">
    <mat-card-header class="mb-5">
      <mat-card-title class="text-gray-300">Signup</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form
        [formGroup]="fg"
        (click)="regInteraction()"
        (focus)="regInteraction()"
      >
        <mat-form-field class="w-full">
          <mat-label>Email</mat-label>
          <input
            type="email"
            matInput
            [formControlName]="'email'"
            placeholder="Ex. name@domain.com"
          />
          <mat-error>
            <ng-container
              [ngTemplateOutlet]="validationMessages"
              [ngTemplateOutletContext]="{ control: fg.get('email') }"
            >
            </ng-container
          ></mat-error>
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Password</mat-label>
          <input type="password" matInput [formControlName]="'password'" />
          <mat-error>
            <ng-container
              [ngTemplateOutlet]="validationMessages"
              [ngTemplateOutletContext]="{ control: fg.get('password') }"
            >
            </ng-container>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Repeat password</mat-label>
          <input
            type="password"
            matInput
            [formControlName]="'repeatPassword'"
          />
          <mat-error>
            <ng-container
              [ngTemplateOutlet]="validationMessages"
              [ngTemplateOutletContext]="{ control: fg.get('repeatPassword') }"
            >
            </ng-container>
          </mat-error>
        </mat-form-field>
      </form>

      <mat-error *ngIf="commonError()">
        {{ commonError() }}
      </mat-error>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button [disabled]="cantSignup()" (click)="signup()">
        Signup
      </button>
      <button mat-button [disabled]="cantReset()" (click)="reset()">
        Reset
      </button>
    </mat-card-actions>
  </mat-card>
</div>

<ng-template #validationMessages let-control="control">
  @if (control.errors && control.touched) {
  {{ control?.errors | appValidationMessages }}
  }
</ng-template>
